/* === 全域 === */
*{ box-sizing:border-box; }
body{
  font-family:"Microsoft JhengHei",system-ui,-apple-system,Segoe UI,Roboto,Arial,"Noto Sans TC",sans-serif;
  background:#f9fafb; color:#374151; line-height:1.6;
}
.page{ background:#fff; border:1px solid #e5e7eb; border-radius:.75rem; padding:1rem; box-shadow:0 1px 2px rgba(0,0,0,.04); }

.hide-mobile{ display:none; }
@media (min-width:640px){ .hide-tablet{ display:none; } .hide-mobile{ display:initial; } }
@media (min-width:1024px){ .hide-tablet{ display:initial; } }

/* Tabs */
#controls > .flex{ border-bottom:1px solid #dbeafe; padding-bottom:.25rem; }
.tab-btn{ flex:1; padding:.85rem 1.2rem; font-size:1.1rem; font-weight:700; text-align:center; border-radius:.9rem .9rem 0 0; border:1px solid #d1d5db; background:#f3f4f6; color:#334155; }
.tab-btn.active{ background:#e0f2fe; color:#0c4a6e; border-color:#bae6fd; border-bottom-color:#e0f2fe; }

/* 課次清單 */
.lesson-box{ border:1px solid #e5e7eb; border-radius:.75rem; margin-bottom:1rem; background:#fff; overflow:hidden; }
.lesson-bar{ display:flex; align-items:center; gap:.5rem; padding:.5rem .75rem; background:#f9fafb; border-bottom:1px solid #e5e7eb; font-weight:600; }
.toggle-btn{ color:#2563eb; cursor:pointer; user-select:none; }
.word-list{ padding:.75rem; display:grid; gap:.75rem; grid-template-columns:repeat(2,1fr); }
@media (min-width:640px){ .word-list{ grid-template-columns:repeat(4,1fr); } }
.word-card{ position:relative; background:#f8fafc; border:1px solid #e5e7eb; border-radius:.5rem; padding:.6rem .4rem; text-align:center; }
.word-en{ font-weight:700; color:#b91c1c; margin-bottom:.25rem; }
.word-pos{ font-size:.85rem; color:#6b7280; }
.word-zh{  font-size:.9rem;  color:#374151; }
.dup-star{ position:absolute; right:8px; top:6px; color:#ef4444; font-size:.8rem; }

/* 出題控制 */
.controls-grid{ display:grid; gap:.75rem; grid-template-columns:repeat(auto-fit,minmax(150px,1fr)); }
.btn-primary{ background:#0ea5e9; color:#fff; padding:.5rem 1rem; border-radius:.5rem; font-weight:600; border:none; cursor:pointer; }
.btn-primary:hover{ background:#0284c7; }
.btn-ghost{ padding:.5rem 1rem; border-radius:.5rem; border:1px solid #d1d5db; background:#f9fafb; cursor:pointer; }
.btn-ghost:hover{ background:#f3f4f6; }

/* Word Bank（置頂 + 用過打叉） */
.word-bank{ margin:1rem 0 1.2rem; display:flex; flex-wrap:wrap; gap:.5rem; position:sticky; top:0; z-index:20; background:#fff; padding:.5rem 0; border-bottom:1px solid #e5e7eb; }
.bank-grid{ display:flex; flex-wrap:wrap; gap:.5rem; }
.bank-chip{ display:inline-block; padding:.35rem .8rem; font-size:.95rem; font-weight:600; border:1px solid #cbd5e1; border-radius:9999px; background:#fff; color:#1e293b; cursor:pointer; }
.bank-chip:hover{ background:#f0f9ff; border-color:#38bdf8; color:#0369a1; }
.bank-chip.used{ background:#cbd5e1; color:#fff; text-decoration:line-through; }

/* 題目輸入框（字體稍大，iPad 好點） */
#questionList{ font-size:1.125rem; }
#questionList input.answer{ border:2px solid #d1d5db; border-radius:6px; padding:6px 10px; font-size:1.125rem; min-height:40px; }
#questionList input.answer.correct{ border-color:#22c55e; background:#ecfdf5; }
#questionList input.answer.wrong{ border-color:#ef4444; background:#fef2f2; }
@media (max-width:820px){ #questionList{ font-size:1.2rem; } #questionList input.answer{ font-size:1.2rem; min-height:44px; } }

.keyword{ font-weight:700; color:#065f46; }

/* 題下解答 */
.inline-ans{ margin-top:8px; background:#fffbeb; border-left:4px solid #f59e0b; border-radius:6px; padding:8px 10px; font-size:.95rem; }
.inline-ans.correct{ border-left-color:#10b981; } .inline-ans.wrong{ border-left-color:#ef4444; }
.exp-line{ margin:2px 0; }
.exp-examples{ display:flex; align-items:baseline; gap:.35rem; }
.exp-label{ white-space:nowrap; color:#92400e; font-weight:700; }

/* header meta */
#headerMeta{ color:#475569; font-variant-numeric:tabular-nums; }

/* 右上角齒輪選單 */
.header-actions{ position:relative; }
.gear-btn{ width:34px; height:34px; border-radius:9999px; border:1px solid #cbd5e1; background:#fff; cursor:pointer; display:flex; align-items:center; justify-content:center; font-size:16px; }
.gear-btn:hover{ background:#f8fafc; }
.header-actions .menu{ position:absolute; right:0; top:42px; width:260px; background:#fff; border:1px solid #e5e7eb; border-radius:.5rem; box-shadow:0 10px 30px rgba(0,0,0,.08); padding:.35rem; display:none; z-index:40; }
.header-actions.open .menu{ display:block; }
.menu-item{ width:100%; text-align:left; padding:.45rem .55rem; border-radius:.4rem; background:#fff; border:none; cursor:pointer; font-size:.95rem; }
.menu-item:hover{ background:#f1f5f9; }
.menu-badge{ margin-top:.25rem; font-size:.75rem; color:#475569; padding:.2rem .35rem; }

/* ===== 爸媽專區（灰白極簡） ===== */
#parentModal .pm-shell{max-width:780px; margin:16px auto 24px; padding:0 16px;}
#parentModal .pm-title{font-size:22px; font-weight:800; margin:8px 0 4px;}
#parentModal .pm-subtitle{color:#6b7280; font-size:13px; margin:0 0 12px;}
#parentModal .pm-card{background:#ffffff; border:1px solid #e5e7eb; border-radius:14px; box-shadow:0 6px 14px rgba(0,0,0,.06); padding:18px; margin-bottom:16px;}
#parentModal .pm-controls{display:grid; grid-template-columns:1fr 1fr; gap:12px;}
#parentModal .pm-row{display:flex; align-items:center; gap:10px;}
#parentModal .pm-label{color:#374151; font-weight:600; font-size:12px;}
#parentModal select,#parentModal input[type="text"]{flex:1; padding:10px 12px; border:1px solid #e5e7eb; border-radius:10px; background:#fff; font-size:14px;}
#parentModal .pm-btn{padding:8px 12px; border:1px solid #e5e7eb; border-radius:8px; background:#fff; cursor:pointer; font-size:13px;}
#parentModal .pm-btn:hover{background:#f3f4f6;}
#parentModal .pm-btn.pm-danger{border-color:#fecaca; color:#b91c1c;}
#parentModal .pm-muted{color:#6b7280; font-size:14px; margin:0;}
@media(max-width:720px){ #parentModal .pm-controls{grid-template-columns:1fr;} }

/* 單字卡清單的標頭與新增鈕 */
#parentModal .pm-card-head{display:flex; align-items:center; justify-content:space-between; margin-bottom:10px;}
#parentModal .pm-card-title{font-weight:800;}
#parentModal .pm-linkbtn{background:transparent; border:none; color:#2563eb; font-weight:700; cursor:pointer; padding:4px 2px;}
#parentModal .pm-linkbtn:hover{ text-decoration:underline; }

/* 單字卡 */
#parentModal .word{border:1px solid #e5e7eb; border-radius:14px; background:#fcfcfd; margin-bottom:12px;}
#parentModal .word-header{padding:14px; cursor:pointer; font-weight:900; font-size:20px; display:flex; align-items:center; gap:8px;}
#parentModal .word-header .main{font-size:20px; font-weight:900;}
#parentModal .word-header .pos{color:#2563eb; font-weight:700;}
#parentModal .word-header .meaning{color:#374151; font-size:15px;}
#parentModal .pairs{padding:0 14px 14px; display:none; flex-direction:column; gap:14px;}
#parentModal .word.open .pairs{display:flex;}
#parentModal .pair{display:flex; flex-direction:column; gap:4px;}
#parentModal .pair .en{font-size:14px; line-height:1.6;}
#parentModal .pair .zh{font-size:13px; color:#6b7280;}
#parentModal .actions{margin-left:auto; display:flex; gap:8px;}
#parentModal .btn{padding:6px 10px; border:1px solid #e5e7eb; border-radius:8px; background:#fff; cursor:pointer; font-size:12px;}
#parentModal .btn:hover{background:#f3f4f6;}
#parentModal .word.editing{outline:2px dashed #d1d5db;}
#parentModal .word.editing [contenteditable="true"]{background:#ffffff; box-shadow:inset 0 0 0 2px #eef2f7; border-radius:8px; padding:4px;}

/* 列印 */
@media print{
  #controls,.word-bank,.btn-primary,.btn-ghost,.toggle-btn,.header-actions{ display:none!important; }
  .page{ break-after:page; }
}
